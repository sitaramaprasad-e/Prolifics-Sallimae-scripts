## ðŸ§  Prompt: Generate Clean DMN 1.4 Standard DRD from Markdown Rules (Left-to-Right Flow + XML-safe + Styled Tables + Exact Rule Names + Final Decision Identification + Top-Level Heading + Interactive Decisions)

You are a **Decision Modeling expert** specializing in **DMN 1.4**.

Your task is to generate a **Decision Requirements Diagram (DRD)** in **DMN-standard notation** using rules from a **Markdown (`.md`) file**. The DRD should follow **DMN best practices** with a **left-to-right flow**, include **interactive decision nodes**, ensure all XML special characters are escaped, include **styled tables**, and **preserve rule names exactly as they appear in the Markdown file**.

---

### **Objective**

* Produce a **DMN 1.4-compliant DRD** in **SVG format**.
* Use **only the rules provided in the Markdown file**.
* Keep **all rule names exactly as written**, escaping only XML special characters (`&, <, >, ', "`).
* Show **dependencies between Input Data and Decisions** using DMN-standard connectors.
* Layout: Inputs on the left, Decisions in the center; arrows flow left-to-right.
* **Top-level heading:** Include a heading at the top of the DRD using the **business goal or top-level decision name**.
* **All nodes interactive:** Decision and Input Data nodes.
* Remove all bold letters from DRD boxes.
* Use a **subtle, professional color palette**: Decisions (soft blue #AED6F1), Input Data (light green #D5F5E3), arrows dark gray/black.

---

### **Final Decision Identification**

Before generating the DRD, the tool must:

1. Identify **top-level/final decisions** by scanning all rules.
2. Map sub-decisions and input data dependencies leading up to final decisions.
3. Position final decisions at the far-right; sub-decisions lead toward them.

---

### **Markdown Input Format**

```
### Rule Name: <Rule Title>
**Rule Purpose:** <purpose>
**Rule Spec:** <spec>
**Code Block:** <file reference>
**DMN:**
Inputs:
- input1: type
Outputs:
- output1: type

| condition | output |
|-----------|--------|
| ...       | ...    |
```

---

### **DMN Elements and Representation**

| Element    | DMN Standard Shape                      | Connector                               |
| ---------- | --------------------------------------- | --------------------------------------- |
| Decision   | Rectangle with slightly rounded corners | Solid arrow for Information Requirement |
| Input Data | Fully rounded rectangle                 | Solid arrow to Decisions                |

---

### **Interactive Feature for Decisions**

* Clicking on a Decision node displays:

  1. **List of rules used in that decision** (exactly as in Markdown) at the top.

     * If no rules are present, show: "No rules defined for this decision".
     * Normal font weight, 12â€“14px, line spacing 1.4â€“1.6.
  2. **DMN-compliant decision table** below the rule list, with standard DMN columns (Inputs, Outputs, Conditions, Hit Policy, etc.), **without rule names**.

     * Table headers bold, rows normal weight, scrollable if content exceeds container.
     * Styled for readability (borders, padding, alternating row colors, word-wrap).
  3. **Close button** to dismiss the popup.
* Popup appears **near clicked node**, brought to front, XML-safe content.

---

### **Deliverables**

1. **DRD Diagram (SVG)**

   * Fully DMN 1.4-compliant, left-to-right flow.
   * Interactive Decision nodes with Close buttons.
   * Clicking Decisions shows **exact rule list + DMN table** (readable, styled, scrollable).
   * All shapes strictly follow **DMN 1.4 standards** (Decision rectangle with rounded corners, Input Data rounded rectangle).

2. **Optional structured DRD text** listing each Decision and its associated rules exactly as written.

---

### **Start**

Generate the DRD once the `.md` rules file is provided, following all above specifications, with **clean colors**, **no bold in boxes**, **proper decision popups**, and **DMN 1.4-compliant shapes**.
